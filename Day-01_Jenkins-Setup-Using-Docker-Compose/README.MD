# ğŸš€ **Day 01 â€” Jenkins Setup Using Docker Compose**

Welcome to **Day 01** of the DevOps Jenkins series!
Today, we will set up **Jenkins** using **Docker Compose**, generate SSH keys for agents, and launch Jenkins in just a few minutes.
Letâ€™s begin! ğŸ¯

## ğŸ¬ Video Demonstration

[![Watch on Youtube](https://i.ytimg.com/vi/QhkCKXNMR6M/maxresdefault.jpg)](https://youtu.be/QhkCKXNMR6M)

## ğŸ§± **1. Project Structure Overview**

Your directory should contain:

```
.
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ setup.sh
â”œâ”€â”€ ssh_keys/
â””â”€â”€ jenkins_data/
```

This will help keep Jenkins data persistent and organized.

## âš™ï¸ **2. Docker Compose File (jenkins in Docker)**

We are using the latest Jenkins image and mounting volumes to persist data and allow Jenkins to interact with Docker.

```yaml
# nano compose.yaml

services:
  jenkins:
    image: jenkins/jenkins:latest
    container_name: jenkins
    privileged: true
    user: root
    restart: always
    ports:
      - 8080:8080
    volumes:
      - ${JENKINS_DATA_DIR}:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - DOCKER_HOST=unix:///var/run/docker.sock
      - TZ=UTC
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:8080/login || exit 1"]
      interval: 30s
      timeout: 10s
      retries: 5
```

### ğŸ” What this does?

* **8080** â†’ Jenkins UI
* **docker.sock** â†’ Allows Jenkins to execute Docker commands
* **persistent volume** â†’ Jenkins data wonâ€™t be lost

## ğŸ› ï¸ **3. Automated Setup Script**

Your `setup.sh` script:
- âœ”ï¸ Generates SSH keys
- âœ”ï¸ Creates `.env` file
- âœ”ï¸ Starts Jenkins using Docker Compose
- âœ”ï¸ Shows initial admin password

Here is the script:

```bash
# nano setup.sh

#!/bin/bash
set -e

# -------------------------------------
# Logging functions with emojis
# -------------------------------------
info() { echo -e "\e[34m[INFO]\e[0m ğŸ”µ $1"; }
success() { echo -e "\e[32m[SUCCESS]\e[0m âœ… $1"; }
error() { echo -e "\e[31m[ERROR]\e[0m âŒ $1"; }

# -------------------------------------
# Validate Docker installation
# -------------------------------------
if ! command -v docker &> /dev/null; then
    error "Docker is not installed! Please install Docker before running this script."
    exit 1
fi

# Validate Docker Compose (v2)
if ! command -v docker compose &> /dev/null; then
    error "Docker Compose v2 is not installed! Install Docker Compose plugin for Docker."
    exit 1
fi

# -------------------------------------
# Check if Jenkins is already running
# -------------------------------------
if docker ps | grep -q jenkins; then
    info "Jenkins container is already running. ğŸš€ Nothing to do."
    exit 0
fi

# -------------------------------------
# Setup variables
# -------------------------------------
SSH_KEY_DIR="./ssh_keys"
SSH_KEY_NAME="jenkins_agent_key"
ENV_FILE=".env"
JENKINS_DATA_DIR="./jenkins_data"

# -------------------------------------
# Create SSH keys if missing
# -------------------------------------
mkdir -p "$SSH_KEY_DIR"

if [ ! -f "$SSH_KEY_DIR/$SSH_KEY_NAME" ]; then
    info "Generating SSH key pair for Jenkins agent... ğŸ”"
    ssh-keygen -t rsa -b 4096 -C "jenkins-agent" -f "$SSH_KEY_DIR/$SSH_KEY_NAME" -N ""
    success "SSH key pair created! ğŸ”‘"
else
    info "SSH key pair already exists. ğŸ‘"
fi

JENKINS_AGENT_SSH_PUBLIC_KEY=$(cat "$SSH_KEY_DIR/$SSH_KEY_NAME.pub")

# -------------------------------------
# Create .env file
# -------------------------------------
info "Creating environment file... ğŸ“„"

cat <<EOF > "$ENV_FILE"
JENKINS_DATA_DIR=$JENKINS_DATA_DIR
JENKINS_AGENT_SSH_PUBLIC_KEY=$JENKINS_AGENT_SSH_PUBLIC_KEY
EOF

success "Environment file created: $ENV_FILE ğŸ“¦"

# -------------------------------------
# Start containers
# -------------------------------------
info "Starting Jenkins using Docker Compose... ğŸš€"
docker compose up -d

success "Jenkins is now running at: http://localhost:8080 ğŸŒ"
info "Using SSH private key for agent: $SSH_KEY_DIR/$SSH_KEY_NAME ğŸ”‘"

# -------------------------------------
# Display initial admin password
# -------------------------------------
info "Fetching Jenkins initial admin password (waiting 10 seconds)... â³"
sleep 10

docker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword 2>/dev/null \
    && success "Above is your Jenkins admin password ğŸ‰" \
    || error "Unable to retrieve admin password. Jenkins may still be starting. âŒ›"
```

## â–¶ï¸ **4. How to Run the Setup**

Run these commands:

```bash
chmod +x setup.sh
./setup.sh
```

Thatâ€™s it! Jenkins will now start in a Docker container.

## ğŸŒ **5. Access Jenkins UI**

Open your browser:

ğŸ‘‰ **[http://IP:8080](http://IP:8080)**

Retrieve the initial admin password (the script prints it automatically):

```
docker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword
```

## ğŸ”§ **6. Install Basic Plugins (Recommended for Beginners)**

Once you log into Jenkins for the first time:

### âœ”ï¸ Step 1 â€” Select "Install Suggested Plugins"

This installs a set of essential plugins automatically, including:

* Git
* Pipeline
* Credentials
* SSH Agent
* Blue Ocean
* Docker Pipeline
* Matrix Authorization
* Slack Notification

These plugins are enough to get started with CI/CD pipelines.

### âš™ï¸ Step 2 â€” Create First Admin User

Enter:

* Username
* Password
* Full name
* Email

Click **Save and Continue**.

### ğŸ§© Step 3 â€” Verify Plugin Installation

After plugins finish installing:

1. Go to **Dashboard â†’ Manage Jenkins â†’ Manage Plugins**
2. Check **Installed Plugins** tab
3. Optionally install additional plugins such as:

   * ğŸ³ **Docker**
   * ğŸ›¢ï¸ **Docker Pipeline**
   * ğŸ” **Credentials Binding**
   * ğŸ“¦ **GitHub Integration**
   * ğŸš€ **Declarative Pipeline**

## ğŸ‰ **Jenkins Setup Complete!**

Now your Jenkins instance is ready to create jobs, configure agents, and start pipelines.



## ğŸ§  About This Project

This project is maintained by **DevOps In Action**, mainly focusing on practical, hands-on DevOps setups for CI/CD automation, containerization, and infrastructure management.

### ğŸ’¼ Connect with Me ğŸ‘‡ğŸ˜Š

* ğŸ”¥ [**YouTube**](https://www.youtube.com/@DevOpsinAction?sub_confirmation=1)
* âœï¸ [**Blog**](https://ibraransari.blogspot.com/)
* ğŸ’¼ [**LinkedIn**](https://www.linkedin.com/in/ansariibrar/)
* ğŸ‘¨â€ğŸ’» [**GitHub**](https://github.com/meibraransari?tab=repositories)
* ğŸ’¬ [**Telegram**](https://t.me/DevOpsinActionTelegram)
* ğŸ³ [**Docker Hub**](https://hub.docker.com/u/ibraransaridocker)


### â­ If You Found This Helpful...

***Please star the repo and share it! Thanks a lot!*** ğŸŒŸ




